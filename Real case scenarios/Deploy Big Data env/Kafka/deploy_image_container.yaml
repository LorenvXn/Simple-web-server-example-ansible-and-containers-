 - name: Build an image and container for a remote docker host
   hosts: '{{ machine }}'
   remote_user: tron
   become: yes
   become_method: sudo
   tasks:
     - name: copy files from controller to remote
       copy:
         src: run_container_kafka.sh
         dest: <master path from where to copy Dockerfile and scripts>
         src: Dockerfile
         dest: <master path from where to copy Dockerfile and scripts>
         owner: tron
         group: tron

     - name: build the image Kafka
       command: docker build -t <image Kafka name> <remote path of Dockerfile>
 
     - name: create docker container
       command: bash run_container_kafka.sh
       
       
      # Ansible 2.4 &2,6 are seriously disappointing when it comes to docker containers
      # so, just be calling some scripts to help use deploying the containers
      # without many headaches 
